<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å²å²å¹³å®‰</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #0a0a0a; font-family: "Microsoft YaHei", sans-serif; color: #f1c40f; }
        #canvas { position: absolute; top: 0; left: 0; z-index: 1; }
        .ui-layer { position: relative; z-index: 10; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; background: rgba(0,0,0,0.4); transition: opacity 1s; }
        .card { background: rgba(139, 0, 0, 0.9); padding: 30px; border-radius: 15px; border: 2px solid #f1c40f; text-align: center; box-shadow: 0 0 20px rgba(241, 196, 15, 0.3); width: 80%; max-width: 400px; }
        input, select { width: 100%; padding: 12px; margin: 15px 0; border-radius: 5px; border: none; font-size: 16px; box-sizing: border-box; }
        button { background: #f1c40f; color: #8b0000; border: none; padding: 12px 30px; border-radius: 25px; font-weight: bold; font-size: 18px; cursor: pointer; transition: transform 0.2s; }
        button:hover { transform: scale(1.05); }
        #wish-text { position: absolute; color: #fff; text-shadow: 0 0 10px #f1c40f; font-size: 1.2rem; pointer-events: none; opacity: 0; text-align: center; width: 100%; }
        .hide { opacity: 0; pointer-events: none; }
        #final-msg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: 90%; opacity: 0; transition: opacity 2s; z-index: 20; color: #ffd700; font-size: 1.5rem; text-shadow: 0 0 15px rgba(255,215,0,0.8); }
    </style>
</head>
<body>

    <canvas id="canvas"></canvas>

    <div id="step1" class="ui-layer">
        <div class="card">
            <h2>ğŸ§§ 2026 è§ä¿¡å¦‚æ™¤</h2>
            <input type="text" id="surname" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“æ°">
            <select id="relation">
                <option value="">è¯·é€‰æ‹©æˆ‘ä»¬çš„å…³ç³»</option>
                <option value="åŒå­¦">åŒå­¦</option>
                <option value="æœ‹å‹">æœ‹å‹</option>
                <option value="è€å¸ˆ">è€å¸ˆ</option>
                <option value="äº²äºº">äº²äºº</option>
            </select>
            <button onclick="toStep2()">å¼€å¯æƒŠå–œ</button>
        </div>
    </div>

    <div id="step2" class="ui-layer hide">
        <div class="card">
            <h2 id="greeting-title"></h2>
            <p id="greeting-content" style="line-height: 1.6;"></p>
            <hr style="border: 0.5px solid #f1c40f; margin: 20px 0;">
            <p>åœ¨æ–°çš„ä¸€å¹´ï¼Œè®¸ä¸‹ä¸€ä¸ªæ„¿æœ›å§ï¼š</p>
            <input type="text" id="user-wish" placeholder="è¾“å…¥ä½ çš„æ„¿æœ›...">
            <button onclick="startAnimation()">æ”¾é£æ„¿æœ›</button>
        </div>
    </div>

    <div id="wish-text"></div>

    <div id="final-msg">
        <p>æ„¿ä½ ä¸ä¸–é—´æ‰€æœ‰å¥½è¿ï¼Œä¸æœŸè€Œé‡ï¼Œæ‰€æ„¿çš†æˆçœŸã€‚</p>
        <p style="font-size: 1rem; color: #c0392b;">ğŸ 2026 é©¬åˆ°æˆåŠŸ</p>
    </div>

    <script>
        // --- æ ¸å¿ƒé…ç½® ---
        // å¦‚æœä½ æƒ³æ”¶åˆ°æ„¿æœ›ï¼Œè¯·å» formspree.io æ³¨å†Œå¹¶æ›¿æ¢ä¸‹é¢çš„ ID
        const FORMSPREE_ID = "YOUR_ID_HERE"; 

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [], stars = [];

        function initCanvas() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', initCanvas);
        initCanvas();

        function toStep2() {
            const surname = document.getElementById('surname').value;
            const relation = document.getElementById('relation').value;
            if(!surname || !relation) return alert("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ä¿¡æ¯å“¦~");

            const content = document.getElementById('greeting-content');
            const title = document.getElementById('greeting-title');

            if(relation === "åŒå­¦") {
                title.innerText = `${surname}åŒå­¦ï¼š`;
                content.innerText = "å±±é«˜æ°´è¿œï¼ŒåŒçª—æƒ…è°Šä¸å‡ã€‚ç¥ä½ ä¸™åˆå¹´å¦‚éªé©¬é©°éª‹ï¼Œå‰ç¨‹å¹¿é˜”ï¼Œå¸¸å›é’æ˜¥é‡Œçœ‹çœ‹ï¼Œä¹Ÿç¥ä½ ä¸‡äº‹é¡ºæ„ï¼Œé˜–å®¶å¹¸ç¦ã€‚";
            } else if(relation === "è€å¸ˆ") {
                title.innerText = `${surname}è€å¸ˆï¼š`;
                content.innerText = "æ•™è¯²å¦‚æ˜¥é£ï¼Œå¸ˆæ©æ·±ä¼¼æµ·ã€‚æ„¿æ‚¨æ–°çš„ä¸€å¹´èº«ä½“å¥åº·ï¼Œä¸‡äº‹é¡ºæ„ï¼Œé˜–å®¶å¹¸ç¦ã€‚";
            } else if(relation === "æœ‹å‹") {
                content.innerText = "å³ä½¿ä¸å¸¸è§é¢ï¼Œä¹ŸçŸ¥ä½ æ´»å¾—æ»šçƒ«ã€‚æ„¿ä½ æ–°å²ç»§ç»­ç­–é©¬æ‰¬é­ï¼Œè‡ªç”±å¦è¡ï¼Œä¸‡äº‹é¡ºæ„ï¼Œé˜–å®¶å¹¸ç¦ã€‚";
            } else {
                content.innerText = "æ„¿æ‚¨æ–°æ˜¥èº«ä½“ç¡¬æœ—ï¼Œå¿ƒä¸­æ— äº‹ï¼Œçœ‰é—´æ— éœœï¼Œæ—¥æ—¥æ˜¯å¥½æ—¥ï¼Œä¸‡äº‹é¡ºæ„ï¼Œé˜–å®¶å¹¸ç¦ã€‚";
            }

            document.getElementById('step1').classList.add('hide');
            setTimeout(() => {
                document.getElementById('step1').style.display = 'none';
                document.getElementById('step2').classList.remove('hide');
            }, 1000);
        }

        function startAnimation() {
            const wish = document.getElementById('user-wish').value;
            if(!wish) return alert("è¯·å…ˆå†™ä¸‹æ„¿æœ›å§~");

            // åå°å‘é€æ•°æ®ï¼ˆFormspreeï¼‰
            if(FORMSPREE_ID !== "YOUR_ID_HERE") {
                fetch(`https://formspree.io/f/${FORMSPREE_ID}`, {
                    method: 'POST',
                    body: JSON.stringify({
                        name: document.getElementById('surname').value,
                        relation: document.getElementById('relation').value,
                        wish: wish
                    }),
                    headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' }
                });
            }

            document.getElementById('step2').classList.add('hide');
            const wishEl = document.getElementById('wish-text');
            wishEl.innerText = wish;
            wishEl.style.opacity = 1;
            wishEl.style.top = '80%';
            
            let y = 80;
            const interval = setInterval(() => {
                y -= 0.5;
                wishEl.style.top = y + '%';
                wishEl.style.fontSize = (1.2 * (y/80)) + 'rem';
                wishEl.style.opacity = y/80;
                
                // æ¨¡æ‹Ÿå­”æ˜ç¯å¾®å…‰æ•ˆæœ
                createLanternParticle();

                if(y < 20) {
                    clearInterval(interval);
                    wishEl.style.opacity = 0;
                    explodeToStars();
                }
            }, 30);
        }

        function createLanternParticle() {
            for(let i=0; i<2; i++) {
                particles.push({
                    x: width/2 + (Math.random()-0.5)*50,
                    y: height * 0.7,
                    vx: (Math.random()-0.5)*2,
                    vy: -Math.random()*3 - 2,
                    alpha: 1,
                    color: '#f39c12'
                });
            }
        }

        function explodeToStars() {
            for(let i=0; i<150; i++) {
                stars.push({
                    x: width/2,
                    y: height * 0.2,
                    vx: (Math.random()-0.5)*15,
                    vy: (Math.random()-0.5)*15,
                    radius: Math.random()*2,
                    alpha: 1
                });
            }
            setTimeout(() => {
                document.getElementById('final-msg').style.opacity = 1;
            }, 1000);
        }

        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(10, 10, 10, 0.2)';
            ctx.fillRect(0, 0, width, height);

            // ç»˜åˆ¶ç²’å­ï¼ˆå­”æ˜ç¯ç«èŠ±ï¼‰
            particles.forEach((p, i) => {
                p.y += p.vy; p.x += p.vx; p.alpha -= 0.02;
                if(p.alpha <=0) particles.splice(i, 1);
                ctx.fillStyle = `rgba(243, 156, 18, ${p.alpha})`;
                ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2); ctx.fill();
            });

            // ç»˜åˆ¶æ˜Ÿæ²³
            stars.forEach((s, i) => {
                s.x += s.vx; s.y += s.vy; s.vx *= 0.98; s.vy *= 0.98;
                if(Math.abs(s.vx) < 0.1) {
                    s.vx = (Math.random()-0.5)*0.5;
                    s.vy = (Math.random()-0.5)*0.5;
                }
                ctx.fillStyle = `rgba(255, 255, 255, ${s.alpha})`;
                ctx.beginPath(); ctx.arc(s.x, s.y, s.radius, 0, Math.PI*2); ctx.fill();
            });
        }
        animate();
    </script>
</body>
</html>
